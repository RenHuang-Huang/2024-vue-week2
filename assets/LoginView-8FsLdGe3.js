import{r,u as _,c as n,a as o,g as c,v as u,j as d,w as g,o as i}from"./index-DY1loI5h.js";import{a as h}from"./axios-C8DqakIB.js";const v={id:"loginPage",class:"bg-yellow"},f={class:"conatiner loginPage vhContainer"},w=o("div",{class:"side"},[o("a",null,[o("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),o("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1),b={class:"formControls"},k=o("h2",{class:"formControls_txt"},"最實用的線上代辦事項服務",-1),C=o("label",{class:"formControls_label",for:"email"},"Email",-1),y={key:0},x=o("label",{class:"formControls_label",for:"pwd"},"密碼",-1),V={key:1},U=o("a",{class:"formControls_btnLink",href:"./#/signUp"},"註冊帳號",-1),B="https://todolist-api.hexschool.io",L={__name:"LoginView",setup(q){const e=r(""),t=r(""),m=_(),p=async()=>{if(!e.value){alert("請輸入 email");return}if(!t.value){alert("請輸入密碼");return}console.log("email:",e.value),console.log("password:",t.value);try{await h.post(`${B}/users/sign_in`,{email:e.value,password:t.value}).then(s=>{console.log(s.data),e.value="",t.value="",console.log("token:",s.data.token),document.cookie=`todolistToken=${s.data.token}`,m.push({path:"/todolist"})})}catch(s){console.log(s),alert("登入失敗："+s.response.data.message)}};return(s,l)=>(i(),n("div",v,[o("div",f,[w,o("div",null,[o("form",b,[k,C,c(o("input",{"onUpdate:modelValue":l[0]||(l[0]=a=>e.value=a),class:"formControls_input",type:"text",id:"email",name:"email",placeholder:"請輸入 email",required:""},null,512),[[u,e.value]]),e.value?d("",!0):(i(),n("span",y,"此欄位不可留空")),x,c(o("input",{class:"formControls_input",type:"password",name:"pwd",id:"pwd",placeholder:"請輸入密碼",required:"","onUpdate:modelValue":l[1]||(l[1]=a=>t.value=a)},null,512),[[u,t.value]]),t.value.length<6?(i(),n("span",V,"密碼不得少於6個字")):d("",!0),o("input",{class:"formControls_btnSubmit",type:"button",value:"登入",onClick:g(p,["prevent"])}),U])])])]))}};export{L as default};
