import{r as l,u as k,e as b,k as x,o as r,c as u,f as p,g as y,a as t,h as v,v as g,t as S,i as f,w as L,l as V,F as T,m as U}from"./index-Dn3eiJPz.js";import{L as E,s as h,a as $}from"./showAlert-CFaJzVdo.js";const N={id:"loginPage",class:"bg-yellow"},A={class:"conatiner loginPage vhContainer"},B=t("div",{class:"side"},[t("a",null,[t("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),t("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1),D={class:"formControls"},R=t("h2",{class:"formControls_txt"},"最實用的線上代辦事項服務",-1),q=t("label",{class:"formControls_label",for:"email"},"Email",-1),F={key:0},I={key:1},M=t("label",{class:"formControls_label",for:"pwd"},"密碼",-1),P={key:2},j="https://todolist-api.hexschool.io",J={__name:"LoginView",setup(z){const n=l(!1),o=l(""),s=l(""),_=k(),c=l(!1),m=l(!1),w=async()=>{if(!o.value||!s.value||d.value||s.value.length<6)return h("錯誤","請填寫正確資料","error","確認");try{n.value=!0;const i=await $.post(`${j}/users/sign_in`,{email:o.value,password:s.value});o.value="",s.value="";const e=new Date;e.setTime(e.getTime()+3600*1e3),document.cookie=`todolistToken=${i.data.token}; expires=${e.toUTCString()}; path=/; SameSite=Strict`,_.push({path:"/todolist"})}catch(i){h("登入失敗",i.response.data.message,"error","確認")}finally{n.value=!1}},d=b(()=>{if(o.value){if(!/\S+@\S+\.\S+/.test(o.value))return"請輸入正確格式Email"}else return"請輸入Email";return""});return(i,e)=>{const C=x("RouterLink");return r(),u(T,null,[p(y(E),{active:n.value,"onUpdate:active":e[0]||(e[0]=a=>n.value=a),"is-full-page":!0},null,8,["active"]),t("div",N,[t("div",A,[B,t("div",null,[t("form",D,[R,q,v(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>o.value=a),class:"formControls_input",type:"text",id:"email",name:"email",placeholder:"請輸入 email",required:"",onChange:e[2]||(e[2]=a=>c.value=!0)},null,544),[[g,o.value]]),c.value&&!o.value?(r(),u("span",F,"此欄位不可留空")):c.value&&d.value?(r(),u("span",I,S(d.value),1)):f("",!0),M,v(t("input",{class:"formControls_input",type:"password",name:"pwd",id:"pwd",placeholder:"請輸入密碼",required:"","onUpdate:modelValue":e[3]||(e[3]=a=>s.value=a),onChange:e[4]||(e[4]=a=>m.value=!0)},null,544),[[g,s.value]]),m.value&&s.value.length<6?(r(),u("span",P," 密碼不得少於6個字 ")):f("",!0),t("input",{class:"formControls_btnSubmit",type:"button",value:"登入",onClick:L(w,["prevent"])}),p(C,{class:"formControls_btnLink",to:"/signUp"},{default:V(()=>[U(" 註冊帳號 ")]),_:1})])])])])],64)}}};export{J as default};
