import{r as l,u as k,e as b,k as y,o as i,c as u,f as p,g as x,a as e,h as v,v as g,t as L,i as f,w as V,l as E,F as S,m as U}from"./index-C5xoCjiW.js";import{L as N,s as h,a as $}from"./showAlert-DvG1cIt3.js";const A={id:"loginPage",class:"bg-yellow"},B={class:"conatiner loginPage vhContainer"},R=e("div",{class:"side"},[e("a",null,[e("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),e("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1),T={class:"formControls"},q=e("h2",{class:"formControls_txt"},"最實用的線上代辦事項服務",-1),D=e("label",{class:"formControls_label",for:"email"},"Email",-1),F={key:0},I={key:1},M=e("label",{class:"formControls_label",for:"pwd"},"密碼",-1),P={key:2},j="https://todolist-api.hexschool.io",J={__name:"LoginView",setup(z){const n=l(!1),o=l(""),s=l(""),_=k(),d=l(!1),m=l(!1),w=async()=>{if(!o.value||!s.value||c.value||s.value.length<6)return h("錯誤","請填寫正確資料","error","確認");try{n.value=!0,await $.post(`${j}/users/sign_in`,{email:o.value,password:s.value}).then(r=>{o.value="",s.value="",document.cookie=`todolistToken=${r.data.token}`,_.push({path:"/todolist"})})}catch(r){h("登入失敗",r.response.data.message,"error","確認")}finally{n.value=!1}},c=b(()=>{if(o.value){if(!/\S+@\S+\.\S+/.test(o.value))return"請輸入正確格式Email"}else return"請輸入Email";return""});return(r,t)=>{const C=y("RouterLink");return i(),u(S,null,[p(x(N),{active:n.value,"onUpdate:active":t[0]||(t[0]=a=>n.value=a),"is-full-page":!0},null,8,["active"]),e("div",A,[e("div",B,[R,e("div",null,[e("form",T,[q,D,v(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>o.value=a),class:"formControls_input",type:"text",id:"email",name:"email",placeholder:"請輸入 email",required:"",onChange:t[2]||(t[2]=a=>d.value=!0)},null,544),[[g,o.value]]),d.value&&!o.value?(i(),u("span",F,"此欄位不可留空")):d.value&&c.value?(i(),u("span",I,L(c.value),1)):f("",!0),M,v(e("input",{class:"formControls_input",type:"password",name:"pwd",id:"pwd",placeholder:"請輸入密碼",required:"","onUpdate:modelValue":t[3]||(t[3]=a=>s.value=a),onChange:t[4]||(t[4]=a=>m.value=!0)},null,544),[[g,s.value]]),m.value&&s.value.length<6?(i(),u("span",P,"密碼不得少於6個字")):f("",!0),e("input",{class:"formControls_btnSubmit",type:"button",value:"登入",onClick:V(w,["prevent"])}),p(C,{class:"formControls_btnLink",to:"/signUp"},{default:E(()=>[U("註冊帳號")]),_:1})])])])])],64)}}};export{J as default};
