import{r as a,u as E,e as L,k as N,o as u,c as p,f as y,g as t,a as s,h as v,v as c,p as g,t as P,i as f,w as S,l as $,F as A,m as q}from"./index-BQWmnsWE.js";import{L as R,s as d,a as B}from"./showAlert-BMVvtiEe.js";const D={id:"signUpPage",class:"bg-yellow"},F={class:"conatiner signUpPage vhContainer"},I=s("div",{class:"side"},[s("a",null,[s("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),s("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1),M={class:"formControls"},T=s("h2",{class:"formControls_txt"},"註冊帳號",-1),j=s("label",{class:"formControls_label",for:"email"},"Email",-1),z={key:0},G={key:1},H=s("label",{class:"formControls_label",for:"name"},"您的暱稱",-1),J={key:2},K=s("label",{class:"formControls_label",for:"pwd"},"密碼",-1),O={key:3},Q=s("label",{class:"formControls_label",for:"pwd2"},"再次輸入密碼",-1),W={key:4},X="https://todolist-api.hexschool.io",se={__name:"SignUpView",setup(Y){const m=a(!1),k=E(),[l,r,n,i]=[a(""),a(""),a(""),a("")],[C,_,U,b]=[a(!1),a(!1),a(!1),a(!1)],x=async()=>{if(!l.value||!r.value||!n.value||!i.value)return d("錯誤","請輸入完整資料","error","確認");if(n.value!==i.value)return d("錯誤","密碼不一致","error","確認");if(h.value)return d("錯誤","請輸入正確格式Email","error","確認");try{m.value=!0,await B.post(`${X}/users/sign_up`,{email:l.value,password:n.value,nickname:r.value}).then(w=>{d("成功","註冊成功","success","確認"),l.value="",n.value="",r.value="",k.push({path:"/login"})})}catch(w){d("錯誤",`${w.response.data.message} 請重新嘗試`,"error","確認")}finally{m.value=!1}},h=L(()=>{if(l.value){if(!/\S+@\S+\.\S+/.test(l.value))return"請輸入正確格式Email"}else return"請輸入Email";return""});return(w,e)=>{const V=N("RouterLink");return u(),p(A,null,[y(t(R),{active:m.value,"onUpdate:active":e[0]||(e[0]=o=>m.value=o),"is-full-page":!0},null,8,["active"]),s("div",D,[s("div",F,[I,s("div",null,[s("form",M,[T,j,v(s("input",{class:"formControls_input",type:"text",name:"email",placeholder:"請輸入 email",required:"","onUpdate:modelValue":e[1]||(e[1]=o=>g(l)?l.value=o:null),onChange:e[2]||(e[2]=o=>_.value=!0)},null,544),[[c,t(l)]]),t(_)&&!t(l)?(u(),p("span",z,"此欄位不可留空")):t(_)&&h.value?(u(),p("span",G,P(h.value),1)):f("",!0),H,v(s("input",{class:"formControls_input",type:"text",name:"name",placeholder:"請輸入您的暱稱",required:"","onUpdate:modelValue":e[3]||(e[3]=o=>g(r)?r.value=o:null),onChange:e[4]||(e[4]=o=>C.value=!0)},null,544),[[c,t(r)]]),t(C)&&!t(r)?(u(),p("span",J,"此欄位不可留空")):f("",!0),K,v(s("input",{class:"formControls_input",type:"password",name:"pwd",placeholder:"請輸入密碼",required:"","onUpdate:modelValue":e[5]||(e[5]=o=>g(n)?n.value=o:null),onChange:e[6]||(e[6]=o=>U.value=!0)},null,544),[[c,t(n)]]),t(U)&&!t(n)?(u(),p("span",O,"此欄位不可留空")):f("",!0),Q,v(s("input",{class:"formControls_input",type:"password",name:"pwd2",placeholder:"請再次輸入密碼",required:"","onUpdate:modelValue":e[7]||(e[7]=o=>g(i)?i.value=o:null),onChange:e[8]||(e[8]=o=>b.value=!0)},null,544),[[c,t(i)]]),t(b)&&!t(i)?(u(),p("span",W,"此欄位不可留空")):f("",!0),s("input",{class:"formControls_btnSubmit",type:"button",value:"註冊帳號",onClick:S(x,["prevent"])}),y(V,{class:"formControls_btnLink",to:"/login"},{default:$(()=>[q("登入")]),_:1})])])])])],64)}}};export{se as default};
